"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),Player=function(){function t(){_classCallCheck(this,t),this.videos=Array.from(document.querySelectorAll(".c-card-media")),this.playerHolder=document.querySelector(".media-player-holder"),this.player=document.querySelector(".media-player"),this.drawer=document.querySelector(".l-media-drawer"),this.getFirstBCR=this.getFirstBCR.bind(this),this.getLastBCR=this.getLastBCR.bind(this),this.invert=this.invert.bind(this),this.play=this.play.bind(this),this.flipIn=this.flipIn.bind(this),this.flipOut=this.flipOut.bind(this),this.addEventListeners()}return _createClass(t,[{key:"addEventListeners",value:function(){var t=this;this.videos.forEach(function(i){i.addEventListener("click",function(i){t.target=i.target,t.flipIn()})}),this.player.addEventListener("click",function(i){t.flipOut()})}},{key:"flipIn",value:function(){var t=this,i=this.videos.indexOf(this.target);this.targetBCR=this.videos[i].getBoundingClientRect(),console.log("target",this.targetBCR);var e=function l(i){t.player.classList.remove("is-animating"),t.player.removeEventListener("transitionend",l)};if(!this.player.classList.contains("is-opened")){movie.content.classList.add("is-faded-out"),movie.sidebarR.style.willChange="transform",movie.sidebarR.style.transform="translateX(100%)",movie.sidebarR.style.transition="transform .15s cubic-bezier(0.4, 0.0, 0.2, 1)",this.player.style.transform="translateY("+(this.targetBCR.top-64)+"px)",this.getFirstBCR(this.player),this.player.classList.add("is-opened"),this.getLastBCR(this.player),this.player.style.transform="translateY(0px)",this.getLastBCR(this.player);var s=24,a=Math.abs(this.firstBCR.width/this.lastBCR.width),r=Math.ceil((this.lastBCR.width-this.firstBCR.width)/2+2*s+64),n=Math.ceil((this.firstBCR.height-this.lastBCR.height)/2-s+(this.targetBCR.top-64));this.player.style.transform="translate("+r+"px,"+n+"px) scale("+a+")",this.getLastBCR(this.player),this.player.classList.add("is-animating"),this.drawer.classList.add("is-visible"),this.play(this.player),this.player.addEventListener("transitionend",e)}}},{key:"flipOut",value:function(){var t=this,i=function s(i){t.player.classList.remove("is-animating"),t.player.classList.remove("is-opened"),t.player.removeEventListener("transitionend",s)};this.getFirstBCR(this.player);var e=(Math.ceil((this.firstBCR.width-this.targetBCR.width)/2),Math.ceil(this.targetBCR.top-(this.targetBCR.height+128+12)));this.player.classList.add("is-animating"),this.player.style.transform="translate(435px,"+e+"px) scale(0)",this.getLastBCR(this.player),this.drawer.classList.remove("is-visible"),movie.content.classList.remove("is-faded-out"),movie.sidebarR.style.willChange="initial",movie.sidebarR.style.transform="none",this.player.addEventListener("transitionend",i)}},{key:"getFirstBCR",value:function(t){this.firstBCR=t.getBoundingClientRect(),console.log("firstBCR",this.firstBCR)}},{key:"getLastBCR",value:function(t){this.lastBCR=t.getBoundingClientRect(),console.log("lastBCR",this.lastBCR)}},{key:"invert",value:function(){var t=24,i=Math.abs(this.firstBCR.width/this.lastBCR.width),e=Math.ceil(this.lastBCR.width-this.firstBCR.width+t),s=Math.ceil(this.firstBCR.top-this.lastBCR.top-t);this.target.style.transform="translate("+e+"px,"+s+"px) scale("+i+")"}},{key:"play",value:function(t){t.style.willChange="transform",t.style.transform="none"}}]),t}();new Player;