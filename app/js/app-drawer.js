"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),AppDrawer=function(){function t(){_classCallCheck(this,t),this.showButtonEl=document.querySelector(".app-bar--nav"),this.appDrawerEl=document.querySelector(".app-drawer"),this.appDrawerContainerEl=document.querySelector(".app-drawer--container"),this.showAppDrawer=this.showAppDrawer.bind(this),this.hideAppDrawer=this.hideAppDrawer.bind(this),this.blockClicks=this.blockClicks.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTransitionEnd=this.onTransitionEnd.bind(this),this.update=this.update.bind(this),this.startX=0,this.currentX=0,this.touchingAppDrawer=!1,this.addEventListeners()}return _createClass(t,[{key:"addEventListeners",value:function(){this.showButtonEl.addEventListener("click",this.showAppDrawer),this.appDrawerEl.addEventListener("click",this.hideAppDrawer),this.appDrawerContainerEl.addEventListener("click",this.blockClicks),this.appDrawerEl.addEventListener("touchstart",this.onTouchStart),this.appDrawerEl.addEventListener("touchmove",this.onTouchMove),this.appDrawerEl.addEventListener("touchend",this.onTouchEnd)}},{key:"onTouchStart",value:function(t){this.appDrawerEl.classList.contains("app-drawer--visible")&&(this.startX=t.touches[0].pageX,this.currentX=this.startX,this.touchingAppDrawer=!0,requestAnimationFrame(this.update))}},{key:"onTouchMove",value:function(t){if(this.touchingAppDrawer){this.currentX=t.touches[0].pageX;var e=Math.min(0,this.currentX-this.startX);0>e&&t.preventDefault()}}},{key:"onTouchEnd",value:function(t){if(this.touchingAppDrawer){this.touchingAppDrawer=!1;var e=Math.min(0,this.currentX-this.startX);this.appDrawerContainerEl.style.transform="",0>e&&this.hideAppDrawer()}}},{key:"update",value:function(){if(this.touchingAppDrawer){requestAnimationFrame(this.update);var t=Math.min(0,this.currentX-this.startX);this.appDrawerContainerEl.style.transform="translateX("+t+"px)"}}},{key:"blockClicks",value:function(t){t.stopPropagation()}},{key:"onTransitionEnd",value:function(t){this.appDrawerEl.removeEventListener("transitionend",this.onTransitionEnd)}},{key:"showAppDrawer",value:function(){this.appDrawerEl.classList.add("app-drawer--visible"),this.appDrawerEl.addEventListener("transitionend",this.onTransitionEnd)}},{key:"hideAppDrawer",value:function(){this.appDrawerEl.classList.remove("app-drawer--visible"),this.appDrawerEl.addEventListener("transitionend",this.onTransitionEnd)}}]),t}();new AppDrawer;